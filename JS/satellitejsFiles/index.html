


<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title></title>
    <script src="node_modules/openmct/dist/openmct.js"></script>
    <script src="node_modules/satellite.js/dist/satellite.min.js"></script>
    <script>
        var THIRTY_MINUTES = 30 * 60 * 1000;
        document.addEventListener("DOMContentLoaded", function () {
            // openmct.install(new OpenMCTMapPlugin());
            openmct.install(openmct.plugins.MyItems());
            openmct.install(openmct.plugins.LocalStorage());
            openmct.install(openmct.plugins.Espresso());
            openmct.install(openmct.plugins.Generator());
            openmct.install(openmct.plugins.ExampleImagery());
            openmct.install(openmct.plugins.UTCTimeSystem());
            openmct.install(openmct.plugins.ImportExport());
            openmct.install(openmct.plugins.Conductor({
                menuOptions: [
                    {
                        name: "Fixed",
                        timeSystem: 'utc',
                        bounds: {
                            start: Date.now() - 30 * 60 * 1000,
                            end: Date.now()
                        }
                    },
                    {
                        name: "Realtime",
                        timeSystem: 'utc',
                        clock: 'local',
                        clockOffsets: {
                            start: -25 * 60 * 1000,
                            end: 5 * 60 * 1000
                        }
                    }
                ]
            }));
            openmct.time.clock('local', {start: -THIRTY_MINUTES, end: 0});
            openmct.time.timeSystem('utc');
            openmct.setAssetPath("node_modules/openmct/dist");
            openmct.start();

            //Hardcoded TLE from NORAD
            var TLE = {"COMMENT":"GENERATED VIA SPACETRACK.ORG API","ORIGINATOR":"18 SPCS","NORAD_CAT_ID":"25544","OBJECT_NAME":"ISS (ZARYA)","OBJECT_TYPE":"PAYLOAD","CLASSIFICATION_TYPE":"U","INTLDES":"98067A","EPOCH":"2019-07-03 17:53:17","EPOCH_MICROSECONDS":"711232","MEAN_MOTION":"15.50981737","ECCENTRICITY":"0.0007389","INCLINATION":"51.6436","RA_OF_ASC_NODE":"279.1198","ARG_OF_PERICENTER":"103.8467","MEAN_ANOMALY":"5.8212","EPHEMERIS_TYPE":"0","ELEMENT_SET_NO":"999","REV_AT_EPOCH":"17782","BSTAR":"0.0009084","MEAN_MOTION_DOT":"0.00053633","MEAN_MOTION_DDOT":"0","FILE":"2505739","TLE_LINE0":"0 ISS (ZARYA)","TLE_LINE1":"1 25544U 98067A   19184.74534388  .00053633  00000-0  90840-3 0  9999","TLE_LINE2":"2 25544  51.6436 279.1198 0007389 103.8467   5.8212 15.50981737177829","OBJECT_ID":"1998-067A","OBJECT_NUMBER":"25544","SEMIMAJOR_AXIS":"6791.995","PERIOD":"92.844","APOGEE":"418.879","PERIGEE":"408.841"};
             
            console.log(TLE);
          
            var tleLine1 = TLE["TLE_LINE1"];
            var tleLine2 = TLE["TLE_LINE2"];

             // Initialize a satellite record
            var satrec = satellite.twoline2satrec(tleLine1, tleLine2);

            //  Propagate satellite using time since epoch (in minutes).
            // var positionAndVelocity = satellite.sgp4(satrec, timeSinceTleEpochMinutes);

            //  Or you can use a JavaScript Date
            var positionAndVelocity = satellite.propagate(satrec, new Date());

            // The position_velocity result is a key-value pair of ECI coordinates.
            // These are the base results from which all other coordinates are derived.
            var positionEci = positionAndVelocity.position,
                velocityEci = positionAndVelocity.velocity;

            // Set the Observer at 122.03 West by 36.96 North, in RADIANS
            var observerGd = {
                longitude: satellite.degreesToRadians(-122.0308),
                latitude: satellite.degreesToRadians(36.9613422),
                height: 0.370
            };

            // You will need GMST for some of the coordinate transforms.
            // http://en.wikipedia.org/wiki/Sidereal_time#Definition
           
            var gmst = satellite.gstime(new Date());

            // You can get ECF, Geodetic, Look Angles, and Doppler Factor.
            var positionEcf   = satellite.eciToEcf(positionEci, gmst),
                observerEcf   = satellite.geodeticToEcf(observerGd),
                positionGd    = satellite.eciToGeodetic(positionEci, gmst),
                lookAngles    = satellite.ecfToLookAngles(observerGd, positionEcf),
                velocityEcf   = satellite.eciToEcf(velocityEci, gmst),
                dopplerFactor = satellite.dopplerFactor(observerEcf, positionEcf, velocityEcf);

            // The coordinates are all stored in key-value pairs.
            // ECI and ECF are accessed by `x`, `y`, `z` properties.
            var satelliteX = positionEci.x,
                satelliteY = positionEci.y,
                satelliteZ = positionEci.z;

            // Look Angles may be accessed by `azimuth`, `elevation`, `range_sat` properties.
            var azimuth   = lookAngles.azimuth,
                elevation = lookAngles.elevation,
                rangeSat  = lookAngles.rangeSat;

            // Geodetic coords are accessed via `longitude`, `latitude`, `height`.
            var longitude = positionGd.longitude,
                latitude  = positionGd.latitude,
                height    = positionGd.height;

            //  Convert the RADIANS to DEGREES for pretty printing (appends "N", "S", "E", "W", etc).
            var longitudeStr = satellite.degreesLong(longitude),
                latitudeStr  = satellite.degreesLat(latitude);

            console.log(latitudeStr);
            console.log(longitudeStr);

          });
    </script>
    <link rel="stylesheet" href="node_modules/openmct/dist/platform/commonUI/general/res/css/startup-base.css">
    <link rel="stylesheet" href="node_modules/openmct/dist/platform/commonUI/general/res/css/openmct.css">
    <link rel="icon" type="image/png" href="node_modules/openmct/dist/platform/commonUI/general/res/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="node_modules/openmct/dist/platform/commonUI/general/res/images/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="node_modules/openmct/dist/platform/commonUI/general/res/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="shortcut icon" href="node_modules/openmct/dist/platform/commonUI/general/res/images/favicons/favicon.ico">
</head>
<body class="user-environ">
    <div class="l-splash-holder s-splash-holder">
        <div class="l-splash s-splash"></div>
    </div>
</body>
</html>